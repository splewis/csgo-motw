csgo-motw
===========================

[![Build Status](https://travis-ci.org/splewis/csgo-motw.svg?branch=master)](https://travis-ci.org/splewis/csgo-motw)

This is a simple web API and sourcemod plugin for CS:GO meant to allow
a server to follow a given league's current map (or its MOTW, map of the week).

The web service already runs at http://csgo-motw.appspot.com, but you can run
a version it yourself, if desired. Data is served from [data.json](data.json),
and pull requests to update it are accepted.

## Game server plugin
To install, you will need either the [SteamWorks](https://forums.alliedmods.net/showthread.php?t=229556) or the [System2](https://forums.alliedmods.net/showthread.php?t=146019) extension installed, both are available on both Linux and Windows and are easily installable.

After that, visit the [releases](https://github.com/splewis/csgo-motw/releases) section and download the release package. Extract the files into the gamesever. Only the plugin binary (``addons/sourcemod/plugins/csgo_motw.smx``) is actually required.

You may also download the [latest development build](http://ci.splewis.net/job/csgo-motw/lastSuccessfulBuild/) if you wish. If you report any bugs from these, make sure to include the build number (when typing ``sm plugins list`` into the server console, the build number will be displayed with the plugin version).

#### Configuring the plugin

Once the server starts up, a config file will be autogenerated in ``cfg/sourcemod/csgo_motw.cfg``. You can edit the plugin cvars in this file.

One of these cvars is ``sm_csgo_motw_always_force_motw`` (default 1), which determines if the plugin will always force the map to the MOTW, or just use the MOTW as the default server map when the server becomes empty.

For example, using ``sm_csgo_motw_always_force_motw 1`` is good for a server that is 24/7 on the current MOTW, and ``sm_csgo_motw_always_force_motw 0`` is good for a private server a team uses to practice.

Most of the other cvars determine the GET request parameters sent to the webserver that determine how the MOTW is determined. Read the section on the web server to find out more about these parameters.

Plugin developers can use the [plugin API](gameserver/include/csgo_motw.inc) too.


## Web server
The webservice runs via webapp2 from the [Google App Engine SDK](https://cloud.google.com/appengine/downloads?hl=en), and is meant to run on Google App Engine.

See [api.md](api.md) for URL parameters to the service. Raw data in JSON form is available at the /data url.
